
#### **CU-001: Consultar y Comparar Precios en Tiempo Real**

| **Elemento**                        | **Descripci√≥n**                                                                                                                                                                                                                                                                                             |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Identificador:**                  | CU-001                                                                                                                                                                                                                                                                                                      |
| **Nombre:**                         | Consultar y Comparar Precios en Tiempo Real                                                                                                                                                                                                                                                                 |
| **Actor Principal:**                | Cliente / Usuario Final.                                                                                                                                                                                                                                                                                    |
| **Actores Secundarios:**            | Sistema de APIs de Supermercados (Walmart, Soriana, Chedraui, etc.).                                                                                                                                                                                                                                        |
| **Prop√≥sito:**                      | Permitir al usuario buscar un producto y obtener una lista consolidada y comparativa de sus precios, disponibilidad y ubicaci√≥n en diferentes cadenas de supermercados, en tiempo real. **(Corresponde a RF1 y RF3)**                                                                                        |
| **Alcance:**                        | M√≥dulo de Consulta y Comparaci√≥n en Tiempo Real.                                                                                                                                                                                                                                                            |
| **Nivel:**                          | Objetivo de Usuario.                                                                                                                                                                                                                                                                                        |
| **Disparador:**                     | El usuario ingresa un criterio de b√∫squeda en la interfaz principal.                                                                                                                                                                                                                                        |
| **Precondiciones:**                 | 1. Conexi√≥n a Internet activa.<br>2. Las APIs de al menos 3 supermercados est√°n disponibles.                                                                                                                                                                                                                |
| **Postcondiciones:**                | 1. Se muestra una lista comparativa de productos.<br>2. La consulta se registra para an√°lisis hist√≥rico (RF2).                                                                                                                                                                                               |
| **Flujo Principal:**                | 1. El usuario ingresa el nombre o c√≥digo de un producto.<br>2. El sistema consulta **concurrentemente** las APIs de los supermercados configurados.<br>3. Se consolidan y normalizan los datos (precio, tienda, disponibilidad, ubicaci√≥n).<br>4. Se muestran los resultados en una vista unificada, ordenables por precio. |
| **Flujos de Excepci√≥n:**            | **E-1: Fallo de API:**<br>1. Si una API no responde, se omite esa tienda de los resultados y se muestra un aviso al usuario.<br>**E-2: Producto no encontrado:**<br>1. El sistema sugiere productos similares.                                                                                                |
| **Reglas de Negocio:**              | **RN-001:** Los precios se deben obtener en tiempo real de las APIs. (RF1).<br>**RN-002:** El tiempo total de respuesta debe ser <3 segundos en el 95% de los casos (RNF-Rendimiento).                                                                                                                        |
| **Requisitos Asociados:**           | **RF1, RF3.** RNF (Rendimiento: <3s), RNF (Confiabilidad: 99% uptime).                                                                                                                                                                                                                                      |

---

#### **CU-002: Visualizar Historial y Evoluci√≥n de Precios**

| **Elemento**                        | **Descripci√≥n**                                                                                                                                                                                                                                                                                             |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Identificador:**                  | CU-002                                                                                                                                                                                                                                                                                                      |
| **Nombre:**                         | Visualizar Historial y Evoluci√≥n de Precios                                                                                                                                                                                                                                                                 |
| **Actor Principal:**                | Usuario Frecuente / Registrado.                                                                                                                                                                                                                                                                             |
| **Actores Secundarios:**            | Base de Datos Hist√≥rica.                                                                                                                                                                                                                                                                                    |
| **Prop√≥sito:**                      | Permitir al usuario visualizar la fluctuaci√≥n hist√≥rica del precio de un producto espec√≠fico para identificar tendencias y decidir el mejor momento de compra. **(Corresponde a RF2)**                                                                                                                      |
| **Alcance:**                        | M√≥dulo de An√°lisis Hist√≥rico.                                                                                                                                                                                                                                                                               |
| **Nivel:**                          | Objetivo de Usuario.                                                                                                                                                                                                                                                                                        |
| **Disparador:**                     | El usuario selecciona la opci√≥n "Ver Historial" desde la p√°gina de detalles de un producto.                                                                                                                                                                                                                  |
| **Precondiciones:**                 | 1. El producto seleccionado existe en la base de datos y tiene al menos una entrada hist√≥rica de precios.                                                                                                                                                                                                   |
| **Postcondiciones:**                | 1. Se muestra la gr√°fica de evoluci√≥n de precios y/o una tabla con datos hist√≥ricos.                                                                                                                                                                                                                          |
| **Flujo Principal:**                | 1. El usuario navega a la p√°gina de un producto.<br>2. El usuario hace clic en el bot√≥n "Ver Historial de Precios".<br>3. El sistema recupera los datos hist√≥ricos del producto desde la BD.<br>4. El sistema presenta los datos en una visualizaci√≥n clara (gr√°fica o tabla).                                         |
| **Flujos de Excepci√≥n:**            | **E-1: Sin Datos Hist√≥ricos:**<br>1. Si el producto no tiene historial, se muestra un mensaje: "A√∫n no hay datos hist√≥ricos para este producto".                                                                                                                                                              |
| **Reglas de Negocio:**              | **RN-003:** La base de datos debe almacenar cada actualizaci√≥n de precio. (RF2).                                                                                                                                                                                                                              |
| **Requisitos Asociados:**           | **RF2.**                                                                                                                                                                                                                                                                                                    |

---

#### **CU-003: Recibir Predicci√≥n de Precios con IA**

| **Elemento**                        | **Descripci√≥n**                                                                                                                                                                                                                                                                                             |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Identificador:**                  | CU-003                                                                                                                                                                                                                                                                                                      |
| **Nombre:**                         | Recibir Predicci√≥n de Precios con IA                                                                                                                                                                                                                                                                        |
| **Actor Principal:**                | Usuario.                                                                                                                                                                                                                                                                                                    |
| **Actores Secundarios:**            | Modelo de Inteligencia Artificial, Base de Datos Hist√≥rica.                                                                                                                                                                                                                                                 |
| **Prop√≥sito:**                      | Utilizar un modelo de IA para predecir posibles aumentos o disminuciones en el precio de un producto y notificar al usuario. **(Corresponde a RF4)**                                                                                                                                                         |
| **Alcance:**                        | M√≥dulo de Predicci√≥n de Precios.                                                                                                                                                                                                                                                                            |
| **Nivel:**                          | Objetivo de Usuario.                                                                                                                                                                                                                                                                                        |
| **Disparador:**                     | El usuario activa la opci√≥n "Seguir producto" o consulta un producto con historial suficiente.                                                                                                                                                                                                               |
| **Precondiciones:**                 | 1. El usuario ha iniciado sesi√≥n (para alertas).<br>2. El producto a predecir cuenta con un historial de precios suficiente en la BD.                                                                                                                                                                         |
| **Postcondiciones:**                | 1. El usuario recibe una notificaci√≥n o visualizaci√≥n con la tendencia prevista.                                                                                                                                                                                                                              |
| **Flujo Principal:**                | 1. El usuario activa el "Seguimiento" de un producto.<br>2. El sistema analiza los datos hist√≥ricos del producto utilizando el modelo de IA.<br>3. El sistema muestra una predicci√≥n (ej., "Se prev√© una bajada de precios la pr√≥xima semana") o programa una alerta autom√°tica.                                   |
| **Flujos de Excepci√≥n:**            | **E-1: Historial Insuficiente:**<br>1. El sistema muestra un mensaje indicando que no hay suficientes datos para realizar una predicci√≥n.                                                                                                                                                                      |
| **Reglas de Negocio:**              | **RN-004:** Las predicciones deben generarse utilizando modelos de IA entrenados con el historial de precios. (RF4).                                                                                                                                                                                           |
| **Requisitos Asociados:**           | **RF4.**                                                                                                                                                                                                                                                                                                    |

---

#### **CU-004: Validar Confiabilidad de una Oferta**

| **Elemento**                        | **Descripci√≥n**                                                                                                                                                                                                                                                                                             |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Identificador:**                  | CU-004                                                                                                                                                                                                                                                                                                      |
| **Nombre:**                         | Validar Confiabilidad de una Oferta                                                                                                                                                                                                                                                                         |
| **Actor Principal:**                | Consumidor.                                                                                                                                                                                                                                                                                                 |
| **Actores Secundarios:**            | Base de Datos Hist√≥rica.                                                                                                                                                                                                                                                                                    |
| **Prop√≥sito:**                      | Evaluar y mostrar al usuario un nivel de validez (alta, media, baja) para las ofertas, bas√°ndose en su duraci√≥n hist√≥rica y vigencia. **(Corresponde a RF5)**                                                                                                                                               |
| **Alcance:**                        | M√≥dulo de Validaci√≥n de Ofertas.                                                                                                                                                                                                                                                                            |
| **Nivel:**                          | Objetivo de Usuario.                                                                                                                                                                                                                                                                                        |
| **Disparador:**                     | El usuario visualiza un producto que est√° en oferta en la lista de resultados.                                                                                                                                                                                                                              |
| **Precondiciones:**                 | 1. El producto tiene un precio promocional registrado.                                                                                                                                                                                                                                                      |
| **Postcondiciones:**                | 1. La oferta se muestra con una etiqueta de confiabilidad (ej. Alta, Media, Baja).                                                                                                                                                                                                                            |
| **Flujo Principal:**                | 1. El sistema detecta un precio promocional.<br>2. El sistema consulta el historial del producto: duraci√≥n de ofertas pasadas y fecha de vigencia actual.<br>3. El sistema asigna un nivel de validez basado en reglas predefinidas.<br>4. La etiqueta de confiabilidad se muestra junto al precio de oferta. |
| **Flujos de Excepci√≥n:**            | **E-1: Sin Historial de Ofertas:**<br>1. Se asigna la etiqueta "Desconocida" o "Nueva Oferta".                                                                                                                                                                                                                |
| **Reglas de Negocio:**              | **RN-005:** El nivel de validez se asigna en funci√≥n de la duraci√≥n hist√≥rica y vigencia de la oferta. (RF5).<br>**RN-006:** Una oferta se marca como vencida autom√°ticamente al pasar su fecha de fin.                                                                                                        |
| **Requisitos Asociados:**           | **RF5.**                                                                                                                                                                                                                                                                                                    |

---

#### **CU-005: Recomendar Tienda M√°s Conveniente**

| **Elemento**                        | **Descripci√≥n**                                                                                                                                                                                                                                                                                             |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Identificador:**                  | CU-005                                                                                                                                                                                                                                                                                                      |
| **Nombre:**                         | Recomendar Tienda M√°s Conveniente                                                                                                                                                                                                                                                                           |
| **Actor Principal:**                | Cliente.                                                                                                                                                                                                                                                                                                    |
| **Actores Secundarios:**            | Sistema de Geolocalizaci√≥n.                                                                                                                                                                                                                                                                                 |
| **Prop√≥sito:**                      | Analizar el precio del producto y la distancia a la tienda para recomendar la mejor opci√≥n, considerando la preferencia del usuario (precio vs. distancia). **(Corresponde a RF6)**                                                                                                                         |
| **Alcance:**                        | M√≥dulo de Optimizaci√≥n de Compra.                                                                                                                                                                                                                                                                           |
| **Nivel:**                          | Objetivo de Usuario.                                                                                                                                                                                                                                                                                        |
| **Disparador:**                     | El usuario realiza una b√∫squeda de producto con la geolocalizaci√≥n activada.                                                                                                                                                                                                                                |
| **Precondiciones:**                 | 1. El usuario ha habilitado la ubicaci√≥n.<br>2. Se ha consultado un producto y se tienen resultados de m√∫ltiples tiendas.                                                                                                                                                                                   |
| **Postcondiciones:**                | 1. El sistema sugiere y/o resalta la tienda √≥ptima seg√∫n los criterios.                                                                                                                                                                                                                                       |
| **Flujo Principal:**                | 1. El usuario busca un producto.<br>2. El sistema obtiene los precios y ubicaciones de las tiendas.<br>3. El sistema calcula la distancia del usuario a cada tienda.<br>4. El sistema aplica un algoritmo de ranking que pondera precio y distancia.<br>5. La tienda con el mejor ranking se sugiere como "Recomendada". |
| **Flujos Alternos:**                | **A-1: Usuario prioriza distancia:**<br>1. El usuario ajusta un filtro para "Priorizar cercan√≠a".<br>2. El sistema reordena los resultados, dando mayor peso a la distancia en el algoritmo.                                                                                                                   |
| **Flujos de Excepci√≥n:**            | **E-1: Geolocalizaci√≥n no activa:**<br>1. El sistema muestra los resultados ordenados solo por precio y pide activar la ubicaci√≥n para una mejor recomendaci√≥n.                                                                                                                                                |
| **Reglas de Negocio:**              | **RN-007:** La recomendaci√≥n debe basarse en el menor costo total (precio + transporte impl√≠cito por distancia). (RF6).                                                                                                                                                                                       |
| **Requisitos Asociados:**           | **RF6.**                                                                                                                                                                                                                                                                                                    |

---

#### **CU-006: Interactuar con el Asistente Inteligente (Chatbot)**

| **Elemento**                        | **Descripci√≥n**                                                                                                                                                                                                                                                                                             |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Identificador:**                  | CU-006                                                                                                                                                                                                                                                                                                      |
| **Nombre:**                         | Interactuar con el Asistente Inteligente (Chatbot)                                                                                                                                                                                                                                                          |
| **Actor Principal:**                | Usuario.                                                                                                                                                                                                                                                                                                    |
| **Actores Secundarios:**            | Modelo de LLM (Chatbot), Base de Datos de Precios, Fuente de Datos de Profeco (v√≠a RAG).                                                                                                                                                                                                                     |
| **Prop√≥sito:**                      | Brindar atenci√≥n personalizada mediante un chatbot con IA que resuelva dudas, busque productos y ofrezca recomendaciones utilizando informaci√≥n verificada. **(Corresponde a RF7)**                                                                                                                         |
| **Alcance:**                        | M√≥dulo de Asistente Virtual.                                                                                                                                                                                                                                                                                |
| **Nivel:**                          | Objetivo de Usuario.                                                                                                                                                                                                                                                                                        |
| **Disparador:**                     | El usuario inicia una conversaci√≥n desde el widget del chatbot en la interfaz.                                                                                                                                                                                                                              |
| **Precondiciones:**                 | 1. El chatbot est√° disponible y operativo.                                                                                                                                                                                                                                                                  |
| **Postcondiciones:**                | 1. El usuario recibe una respuesta √∫til y contextual a su consulta.                                                                                                                                                                                                                                           |
| **Flujo Principal:**                | 1. El usuario escribe una pregunta (ej., "¬øD√≥nde est√°n las manzanas m√°s baratas?").<br>2. El chatbot procesa la consulta utilizando el LLM, enriquecido con RAG que accede a la base de datos de precios e informaci√≥n de Profeco.<br>3. El chatbot devuelve una respuesta precisa, con datos concretos y, si es apropiado, enlaces a productos o comparativas. |
| **Flujos de Excepci√≥n:**            | **E-1: Consulta no entendida:**<br>1. El chatbot pide amablemente reformular la pregunta o ofrece una lista de opciones comunes de b√∫squeda.                                                                                                                                                                   |
| **Reglas de Negocio:**              | **RN-008:** El chatbot debe utilizar informaci√≥n verificada de la base de datos interna y de Profeco. (RF7).                                                                                                                                                                                                   |
| **Requisitos Asociados:**           | **RF7.**                                                                                                                                                                                                                                                                                                    |

---

#### **CU-007: Integrar y Validar Datos con Profeco**

| **Elemento**                        | **Descripci√≥n**                                                                                                                                                                                                                                                                                             |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Identificador:**                  | CU-007                                                                                                                                                                                                                                                                                                      |
| **Nombre:**                         | Integrar y Validar Datos con Profeco                                                                                                                                                                                                                                                                        |
| **Actor Principal:**                | Sistema (Proceso Automatizado).                                                                                                                                                                                                                                                                             |
| **Actores Secundarios:**            | API o Fuente de Datos de Profeco, Base de Datos de SmartPrice.                                                                                                                                                                                                                                              |
| **Prop√≥sito:**                      | Consultar y utilizar informaci√≥n de la Profeco para enriquecer la base de datos y validar la veracidad de precios y ofertas, aumentando la confiabilidad del sistema. **(Corresponde a RF8)**                                                                                                               |
| **Alcance:**                        | M√≥dulo de Integraci√≥n con Entidades Externas.                                                                                                                                                                                                                                                               |
| **Nivel:**                          | Subfunci√≥n (a nivel de sistema).                                                                                                                                                                                                                                                                            |
| **Disparador:**                     | Programado por un `Cron Job` o activado manualmente por un administrador.                                                                                                                                                                                                                                   |
| **Precondiciones:**                 | 1. La fuente de datos de Profeco est√° disponible y accesible.                                                                                                                                                                                                                                               |
| **Postcondiciones:**                | 1. La base de datos de SmartPrice se actualiza con la informaci√≥n validada por Profeco.<br>2. Los precios y ofertas pueden marcarse con un sello de "Verificado por Profeco".                                                                                                                                 |
| **Flujo Principal:**                | 1. El proceso automatizado se ejecuta seg√∫n la programaci√≥n (ej., cada 24 horas).<br>2. El sistema consulta la informaci√≥n relevante (precios, quejas, alertas) de Profeco.<br>3. El sistema cruza esta informaci√≥n con sus propios registros.<br>4. Los registros se actualizan o marcan seg√∫n corresponda (ej., un precio se marca como "Coincide con Profeco"). |
| **Flujos de Excepci√≥n:**            | **E-1: Fuente de Profeco no disponible:**<br>1. El sistema registra el error en un log y reintenta en el siguiente ciclo.                                                                                                                                                                                      |
| **Reglas de Negocio:**              | **RN-009:** La integraci√≥n con Profeco debe cumplir con las normativas de protecci√≥n al consumidor en M√©xico. (RF8, RNF-Legales).                                                                                                                                                                             |
| **Requisitos Asociados:**           | **RF8.** RNF (Legales).                                                                                                                                                                                                                                                                                     |
¬°Perfecto, Jhoana! Tienes raz√≥n, voy a simplificar ese concepto y a√±adir algunos requisitos que considero importantes pero que faltan en el documento original, manteniendo un lenguaje accesible para una estudiante de ingenier√≠a.

---

### üîÑ **Explicaci√≥n Sencilla del "Proceso Automatizado"**

En lugar de "Cron Job", podemos decir: **"El sistema realiza esta verificaci√≥n autom√°ticamente cada 24 horas"**. Es como cuando tu tel√©fono se actualiza solo por las noches - no necesitas hacer nada, el sistema trabaja autom√°ticamente.

---

### üß© **Casos de Uso Mejorados con Requisitos que Hac√≠an Falta**

#### **CU-007: Integrar y Validar Datos con Profeco (Versi√≥n Simplificada)**

| **Elemento**                        | **Descripci√≥n** |
|---|---|
| **Identificador:** | CU-007 |
| **Nombre:** | Integrar y Validar Datos con Profeco |
| **Actor Principal:** | Sistema (Proceso Automatizado) |
| **Actores Secundarios:** | Fuente de Datos de Profeco, Administrador |
| **Prop√≥sito:** | Consultar informaci√≥n de la Profeco autom√°ticamente para asegurar que los precios y ofertas en SmartPrice sean reales y confiables. |
| **Alcance:** | M√≥dulo de Integraci√≥n con Entidades Externas |
| **Nivel:** | Subfunci√≥n (a nivel de sistema) |
| **Disparador:** | Se ejecuta autom√°ticamente cada 24 horas |
| **Precondiciones:** | 1. El sistema tiene acceso a Internet<br>2. La p√°gina o API de Profeco est√° disponible |
| **Postcondiciones:** | 1. La base de datos de SmartPrice se actualiza con informaci√≥n verificada<br>2. Los precios pueden mostrar un sello de "Verificado por Profeco" |
| **Flujo Principal:** | 1. El sistema revisa autom√°ticamente la informaci√≥n de Profeco cada 24 horas<br>2. Compara los precios y ofertas de Profeco con los que tiene en su base de datos<br>3. Si encuentra diferencias, actualiza los precios y marca aquellos que coinciden como "verificados" |
| **Flujos de Excepci√≥n:** | **E-1: Profeco no est√° disponible:**<br>1. El sistema lo intenta de nuevo en 1 hora<br>2. Si despu√©s de 3 intentos no funciona, env√≠a un correo de alerta al administrador |
| **Reglas de Negocio:** | **RN-009:** La verificaci√≥n con Profeco se debe hacer al menos una vez al d√≠a |
| **Requisitos Asociados:** | **RF8**, RNF (Legales) |

---

#### **CU-008: Gestionar Perfil de Usuario**

| **Elemento** | **Descripci√≥n** |
|---|---|
| **Identificador:** | CU-008 |
| **Nombre:** | Gestionar Perfil de Usuario |
| **Actor Principal:** | Usuario Registrado |
| **Prop√≥sito:** | Permitir al usuario gestionar sus preferencias y datos personales |
| **Flujo Principal:** | 1. Usuario accede a "Mi Perfil"<br>2. Edita sus preferencias (tiendas favoritas, radio de b√∫squeda)<br>3. Guarda los cambios<br>4. El sistema actualiza las recomendaciones bas√°ndose en las nuevas preferencias |
| **Reglas de Negocio:** | Los datos personales se protegen seg√∫n la Ley Federal de Protecci√≥n de Datos |
| **Requisitos Asociados:** | **RF9**, RNF (Protecci√≥n de datos) |

#### **CU-009: Recibir Notificaciones de Ofertas**

| **Elemento** | **Descripci√≥n** |
|---|---|
| **Identificador:** | CU-009 |
| **Nombre:** | Recibir Notificaciones de Ofertas |
| **Actor Principal:** | Usuario Registrado |
| **Prop√≥sito:** | Recibir alertas cuando productos seguidos bajen de precio |
| **Flujo Principal:** | 1. Usuario activa "seguimiento" en un producto<br>2. Sistema monitorea el precio<br>3. Cuando detecta baja de precio ‚â•5%, env√≠a notificaci√≥n<br>4. Usuario recibe alerta en la app |
| **Reglas de Negocio:** | Solo enviar notificaciones si el precio baja al menos 5% |
| **Requisitos Asociados:** | **RF10** |

